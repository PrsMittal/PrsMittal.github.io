(()=>{const e=window;e.Gallery={photos:[],loadImages:()=>{const l=$$(".gallery-photos li .photos");e.Gallery.photosToLoad=l.length,Array.from(l).forEach(l=>{e.Gallery.loadImage(l)}),$$(".gallery-photos li.smaller").removeClass("smaller"),Array.from($$(".gallery-photos")).forEach(l=>{e.Gallery.n||0==e.Gallery.n?e.Gallery.n=e.Gallery.n+1>l.children.length-1?0:e.Gallery.n+1:e.Gallery.n=Math.floor((l.children.length-1)*Math.random()),l.children[e.Gallery.n].classList.add("smaller")})},loadImage:l=>{const o=document.createElement("img"),t=e.Gallery.photos.splice(Math.floor(Math.random()*e.Gallery.photos.length-1),1);if(l.appendChild(o),e.Gallery.photos_temp||(e.Gallery.photos_temp=[]),e.Gallery.photos_temp.push(t[0]),o.complete||o.width+o.height!=0?e.Gallery.showImage(o):o.addEventListener("load",()=>{e.Gallery.showImage(o)}),l.children.length>2)for(var a=0;a<l.children.length-1;a++)l.removeChild(l.children[a]);o.src=t[0].photo,0==e.Gallery.photos.length&&(e.Gallery.photos=e.Gallery.photos_temp,e.Gallery.photos_temp=[]);const r=l.parentNode.querySelector(".photo-overlay");r.querySelector(".title").textContent=t[0].country,r.querySelector(".location").textContent=t[0].city,r.setAttribute("href",t[0].group_url)},showImage:l=>{setTimeout(()=>{l.classList.add("show"),e.Gallery.photosToLoad-=1,0==e.Gallery.photosToLoad&&setTimeout(e.Gallery.loadImages,6e3)},200+800*Math.random())},loadData:()=>{$$.ajax({type:"GET",url:"photos.json",success:l=>{e.Gallery.photos=l.photos,e.Gallery.init()},error:()=>{}})},init:()=>{e.Gallery.loadImages(),Array.from($$(".gallery-photos li")).forEach(e=>{e.addEventListener("mouseover",function(){!Sketch.funcs.isTouchDevice()&&window.innerWidth>=768&&this.classList.add("show")}),e.addEventListener("mouseout",function(){this.classList.remove("show")})})}},$$.ready(()=>{e.Gallery.loadData()})})();